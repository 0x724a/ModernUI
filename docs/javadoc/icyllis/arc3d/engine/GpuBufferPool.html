<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Sat Mar 30 13:34:46 CST 2024 -->
<title>GpuBufferPool</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2024-03-30">
<meta name="description" content="declaration: package: icyllis.arc3d.engine, class: GpuBufferPool">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">icyllis.arc3d.engine</a></div>
<h1 title="Class GpuBufferPool" class="title">Class GpuBufferPool</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">icyllis.arc3d.engine.GpuBufferPool</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public abstract class </span><span class="element-name type-name-label">GpuBufferPool</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">A pool of geometry buffers tied to a <a href="GpuDevice.html" title="class in icyllis.arc3d.engine"><code>GpuDevice</code></a>.
 <p>
 The pool allows a client to make space for geometry and then put back excess
 space if it over allocated. When a client is ready to draw from the pool
 it calls <a href="#flush()"><code>flush()</code></a> on the pool ensure buffers are ready for drawing.
 The pool can be reset after drawing is completed to recycle space. After that,
 all GPU buffers can't be touched again (imagine we have triple buffering).
 <p>
 At creation time a minimum per-buffer size can be specified. Additionally,
 a number of buffers to pre-allocate can be specified. These will be allocated
 at the minimum size and kept around until the pool is destroyed.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#DEFAULT_BUFFER_SIZE" class="member-name-link">DEFAULT_BUFFER_SIZE</a></code></div>
<div class="col-last even-row-color">
<div class="block">We expect buffers for meshes to be at least 128KB.</div>
</div>
<div class="col-first odd-row-color"><code>protected long</code></div>
<div class="col-second odd-row-color"><code><a href="#mBufferPtr" class="member-name-link">mBufferPtr</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected <a href="GpuBuffer.html" title="class in icyllis.arc3d.engine">GpuBuffer</a>[]</code></div>
<div class="col-second even-row-color"><code><a href="#mBuffers" class="member-name-link">mBuffers</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a></code></div>
<div class="col-second odd-row-color"><code><a href="#mCachedWriter" class="member-name-link">mCachedWriter</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected int[]</code></div>
<div class="col-second even-row-color"><code><a href="#mFreeBytes" class="member-name-link">mFreeBytes</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected int</code></div>
<div class="col-second odd-row-color"><code><a href="#mIndex" class="member-name-link">mIndex</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier</div>
<div class="table-header col-second">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected </code></div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(icyllis.arc3d.engine.ResourceProvider,int)" class="member-name-link">GpuBufferPool</a><wbr>(<a href="ResourceProvider.html" title="class in icyllis.arc3d.engine">ResourceProvider</a>&nbsp;resourceProvider,
 int&nbsp;bufferType)</code></div>
<div class="col-last even-row-color">
<div class="block">Constructor.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#flush()" class="member-name-link">flush</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Ensures all buffers are unlocked and have all data written to them.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="GpuBufferPool.html" title="class in icyllis.arc3d.engine">GpuBufferPool</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#makeIndexPool(icyllis.arc3d.engine.ResourceProvider)" class="member-name-link">makeIndexPool</a><wbr>(<a href="ResourceProvider.html" title="class in icyllis.arc3d.engine">ResourceProvider</a>&nbsp;resourceProvider)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Constructor.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="GpuBufferPool.html" title="class in icyllis.arc3d.engine">GpuBufferPool</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#makeInstancePool(icyllis.arc3d.engine.ResourceProvider)" class="member-name-link">makeInstancePool</a><wbr>(<a href="ResourceProvider.html" title="class in icyllis.arc3d.engine">ResourceProvider</a>&nbsp;resourceProvider)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Constructor.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#makeSpace(int,int)" class="member-name-link">makeSpace</a><wbr>(int&nbsp;size,
 int&nbsp;alignment)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a block of memory to hold data.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#makeSpace(icyllis.arc3d.engine.Mesh)" class="member-name-link">makeSpace</a><wbr>(<a href="Mesh.html" title="interface in icyllis.arc3d.engine">Mesh</a>&nbsp;mesh)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns a block of memory to hold vertices/instances/indices.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="GpuBufferPool.html" title="class in icyllis.arc3d.engine">GpuBufferPool</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#makeVertexPool(icyllis.arc3d.engine.ResourceProvider)" class="member-name-link">makeVertexPool</a><wbr>(<a href="ResourceProvider.html" title="class in icyllis.arc3d.engine">ResourceProvider</a>&nbsp;resourceProvider)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Constructor.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>abstract <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#makeWriter(icyllis.arc3d.engine.Mesh)" class="member-name-link">makeWriter</a><wbr>(<a href="Mesh.html" title="interface in icyllis.arc3d.engine">Mesh</a>&nbsp;mesh)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Similar to <a href="#makeSpace(icyllis.arc3d.engine.Mesh)"><code>makeSpace(Mesh)</code></a>, but returns a wrapper instead.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#putBack(int)" class="member-name-link">putBack</a><wbr>(int&nbsp;bytes)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Frees data from makeSpaces in LIFO order.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#reset()" class="member-name-link">reset</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Invalidates all the data in the pool, unrefs non-pre-allocated buffers.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#submit(icyllis.arc3d.engine.CommandBuffer)" class="member-name-link">submit</a><wbr>(<a href="CommandBuffer.html" title="class in icyllis.arc3d.engine">CommandBuffer</a>&nbsp;cmdBuffer)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Alternative to <a href="#reset()"><code>reset()</code></a> that flushes and submits ALL using buffers to
 the given command buffer.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="DEFAULT_BUFFER_SIZE">
<h3>DEFAULT_BUFFER_SIZE</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">DEFAULT_BUFFER_SIZE</span></div>
<div class="block">We expect buffers for meshes to be at least 128KB.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../constant-values.html#icyllis.arc3d.engine.GpuBufferPool.DEFAULT_BUFFER_SIZE">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="mBuffers">
<h3>mBuffers</h3>
<div class="member-signature"><span class="annotations"><a href="../core/SharedPtr.html" title="annotation interface in icyllis.arc3d.core">@SharedPtr</a>
</span><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="GpuBuffer.html" title="class in icyllis.arc3d.engine">GpuBuffer</a>[]</span>&nbsp;<span class="element-name">mBuffers</span></div>
</section>
</li>
<li>
<section class="detail" id="mFreeBytes">
<h3>mFreeBytes</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int[]</span>&nbsp;<span class="element-name">mFreeBytes</span></div>
</section>
</li>
<li>
<section class="detail" id="mIndex">
<h3>mIndex</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">mIndex</span></div>
</section>
</li>
<li>
<section class="detail" id="mBufferPtr">
<h3>mBufferPtr</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">mBufferPtr</span></div>
</section>
</li>
<li>
<section class="detail" id="mCachedWriter">
<h3>mCachedWriter</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a></span>&nbsp;<span class="element-name">mCachedWriter</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(icyllis.arc3d.engine.ResourceProvider,int)">
<h3>GpuBufferPool</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="element-name">GpuBufferPool</span><wbr><span class="parameters">(<a href="ResourceProvider.html" title="class in icyllis.arc3d.engine">ResourceProvider</a>&nbsp;resourceProvider,
 int&nbsp;bufferType)</span></div>
<div class="block">Constructor.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>resourceProvider</code> - the factory used to create the buffers.</dd>
<dd><code>bufferType</code> - the type of buffers to create.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="makeVertexPool(icyllis.arc3d.engine.ResourceProvider)">
<h3>makeVertexPool</h3>
<div class="member-signature"><span class="annotations">@Nonnull
</span><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="GpuBufferPool.html" title="class in icyllis.arc3d.engine">GpuBufferPool</a></span>&nbsp;<span class="element-name">makeVertexPool</span><wbr><span class="parameters">(<a href="ResourceProvider.html" title="class in icyllis.arc3d.engine">ResourceProvider</a>&nbsp;resourceProvider)</span></div>
<div class="block">Constructor.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>resourceProvider</code> - the factory used to create the vertex buffers.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="makeInstancePool(icyllis.arc3d.engine.ResourceProvider)">
<h3>makeInstancePool</h3>
<div class="member-signature"><span class="annotations">@Nonnull
</span><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="GpuBufferPool.html" title="class in icyllis.arc3d.engine">GpuBufferPool</a></span>&nbsp;<span class="element-name">makeInstancePool</span><wbr><span class="parameters">(<a href="ResourceProvider.html" title="class in icyllis.arc3d.engine">ResourceProvider</a>&nbsp;resourceProvider)</span></div>
<div class="block">Constructor.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>resourceProvider</code> - the factory used to create the instance buffers.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="makeIndexPool(icyllis.arc3d.engine.ResourceProvider)">
<h3>makeIndexPool</h3>
<div class="member-signature"><span class="annotations">@Nonnull
</span><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="GpuBufferPool.html" title="class in icyllis.arc3d.engine">GpuBufferPool</a></span>&nbsp;<span class="element-name">makeIndexPool</span><wbr><span class="parameters">(<a href="ResourceProvider.html" title="class in icyllis.arc3d.engine">ResourceProvider</a>&nbsp;resourceProvider)</span></div>
<div class="block">Constructor.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>resourceProvider</code> - the factory used to create the index buffers.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="flush()">
<h3>flush</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">flush</span>()</div>
<div class="block">Ensures all buffers are unlocked and have all data written to them.
 Call before drawing using buffers from the pool.</div>
</section>
</li>
<li>
<section class="detail" id="reset()">
<h3>reset</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">reset</span>()</div>
<div class="block">Invalidates all the data in the pool, unrefs non-pre-allocated buffers.
 This should be called at the end of each frame and destructor.</div>
</section>
</li>
<li>
<section class="detail" id="submit(icyllis.arc3d.engine.CommandBuffer)">
<h3>submit</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">submit</span><wbr><span class="parameters">(<a href="CommandBuffer.html" title="class in icyllis.arc3d.engine">CommandBuffer</a>&nbsp;cmdBuffer)</span></div>
<div class="block">Alternative to <a href="#reset()"><code>reset()</code></a> that flushes and submits ALL using buffers to
 the given command buffer. This method ensures all buffers are unlocked and
 have all data written to them.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>cmdBuffer</code> - the cmd buf the G buffers used in</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="putBack(int)">
<h3>putBack</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">putBack</span><wbr><span class="parameters">(int&nbsp;bytes)</span></div>
<div class="block">Frees data from makeSpaces in LIFO order.</div>
</section>
</li>
<li>
<section class="detail" id="makeSpace(icyllis.arc3d.engine.Mesh)">
<h3>makeSpace</h3>
<div class="member-signature"><span class="modifiers">public abstract</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">makeSpace</span><wbr><span class="parameters">(<a href="Mesh.html" title="interface in icyllis.arc3d.engine">Mesh</a>&nbsp;mesh)</span></div>
<div class="block">Returns a block of memory to hold vertices/instances/indices. A buffer
 designated to hold the vertices/instances/indices given to the caller.
 The buffer may or may not be locked. The returned ptr remains valid
 until any of the following:
 <ul>
      <li>this method is called again.</li>
      <li><a href="#flush()"><code>flush()</code></a> is called.</li>
      <li><a href="#reset()"><code>reset()</code></a> is called.</li>
 </ul>
 Once <a href="#flush()"><code>flush()</code></a> on the pool is called the vertices/instances/indices
 are guaranteed to be in the buffer at the offset indicated by baseVertex/
 baseInstance/firstIndex. Until that time they may be in temporary storage
 and/or the buffer may be locked.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mesh</code> - specifies the mesh to allocate space for</dd>
<dt>Returns:</dt>
<dd>pointer to first vertex/instance/index, or NULL if failed</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="makeWriter(icyllis.arc3d.engine.Mesh)">
<h3>makeWriter</h3>
<div class="member-signature"><span class="annotations">@Nullable
</span><span class="modifiers">public abstract</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/ByteBuffer.html" title="class or interface in java.nio" class="external-link">ByteBuffer</a></span>&nbsp;<span class="element-name">makeWriter</span><wbr><span class="parameters">(<a href="Mesh.html" title="interface in icyllis.arc3d.engine">Mesh</a>&nbsp;mesh)</span></div>
<div class="block">Similar to <a href="#makeSpace(icyllis.arc3d.engine.Mesh)"><code>makeSpace(Mesh)</code></a>, but returns a wrapper instead.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>mesh</code> - specifies the mesh to allocate space for</dd>
<dt>Returns:</dt>
<dd>pointer to first vertex/instance/index, or null if failed</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="makeSpace(int,int)">
<h3>makeSpace</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">makeSpace</span><wbr><span class="parameters">(int&nbsp;size,
 int&nbsp;alignment)</span></div>
<div class="block">Returns a block of memory to hold data. A buffer designated to hold the
 data is given to the caller. The buffer may or may not be locked. The
 returned ptr remains valid until any of the following:
 <ul>
      <li>this method is called again.</li>
      <li><a href="#flush()"><code>flush()</code></a> is called.</li>
      <li><a href="#reset()"><code>reset()</code></a> is called.</li>
 </ul>
 Once <a href="#flush()"><code>flush()</code></a> on the pool is called the data is guaranteed to be in the
 buffer at the offset indicated by offset. Until that time it may be
 in temporary storage and/or the buffer may be locked.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>size</code> - the amount of data to make space for</dd>
<dd><code>alignment</code> - alignment constraint from start of buffer</dd>
<dt>Returns:</dt>
<dd>pointer to where the client should write the data, may be nullptr.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
